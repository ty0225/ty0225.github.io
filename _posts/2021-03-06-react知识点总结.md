---
title: React知识点整理
description: 
categories:
 - technology
tags:
---

> 复习React笔记。

### 1、React16新的生命周期

### 2、React16新的特性

### 3、React中组件传递数据的方式， 父子，子父，兄弟

### 4、React中setState异步还是同步

### 5、React中列表元素为什么要加key属性

React中的列表组件需要加key属性，不加的话在本地控制台会显示一个警告：“Warning: Each child in a list should have a unique "key" prop”。而生产环境不会。

下面我们来深入了解一下key：

- key属性的作用

1）由于React是利用模板引擎对页面进行渲染，新旧Dom树进行对比后再转化成真实的Dom树。每当有props或者state的数据发生改变时，都会触发render，返回一个新的组件树。

2）如果一个组件内部特别复杂的时候，新旧组件树的对比将会非常消耗性能，算法复杂度能达到O(n)3，显然是不能被接受的。

3）因此为了解决此性能问题，提出了一种启发式算法，将新旧Dom对比转化成真实Dom的过程的算法复杂度降低到O(n)。具体如下：

这种算法将对React组件进行假设和预判。

假设是指页面元素的类型不同，将会渲染出完全不同的树。

预判是任意一个父组件的每一次渲染，同一个 key 属性的子组件应该是稳定的(每一次父组件执行 render() 方法的时候，同一个 key 属性值永远标识唯一的 React 组件)。

4）使用key属性的好处：由于React启发式算法中将key属性作为组件唯一标识的规则，无论是从哪个位置插入新元素， React在下次渲染的时候，仍然能够识别这些组件，不会对原来的旧组件执行变更操作。

5）key属性遵循的原则：唯一、稳定。

- 如果没有key属性，会引发什么样的问题

在没有为组件设置 key 属性的情况下，React 会默认将数组索引设置为 key 属性的值。

数组索引赋值给key的问题：比如选中的数据更改排序，那么选中的数据就发生了变化。

- 如何声明key

因此大多数时候用一个唯一且稳定的标识来给key赋值，一般考虑用API返回的id来确定key的值。

- eslint中与key有关的规则

eslint-plugin-React 中
```javascript
"React/jsx-key" // 检查是否声明了 key 属性
"no-array-index-key" //检查是否使用了数组索引声明 key 属性
```

参考：[React列表循环为什么需要key](https://juejin.cn/post/6940974776441634823)

### 6、React中什么是高阶组件

### 7、React中函数组件和class组件的区别

1）class组件特点：

- 有组件实例；
- 有生命周期；
- 有 state 和 setState。

2）函数组件特点：

- 没有组件实例；
- 没有生命周期；
- 没有 state 和 setState，只能接收 props；
- 函数组件是一个纯函数，执行完即销毁，无法存储 state。

class 组件存在的问题：

- 大型组件很难拆分和重构，变得难以测试；
- 相同业务逻辑分散到各个方法中，可能会变得混乱；
- 复用逻辑可能变得复杂，如 HOC 、Render Props。

所以 react 中更提倡函数式编程，因为函数更灵活，更易拆分，但函数组件太简单，所以出现了hook，hook就是用来增强函数组件功能的。

参考：[React 函数组件和class组件区别](https://zhuanlan.zhihu.com/p/339547131)





